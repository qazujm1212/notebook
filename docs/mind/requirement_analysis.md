# 需求工程

- 需求开发

  包括需求获取、需求分析、编写规格说明书（需求定义）和需求验证4个阶段。

- 需求管理

  包括定义需求基线、处理需求变更及需求跟踪等方面的工作

## 需求开发

需求开发所要做的工作是深入描述软件的功能和性能，确定软件设计的限制和软件与其他系统元素的接口细节，定义软件的其他有效性需求，细化软件要处理的数据域。用一句话概括就是：需求开发主要确定开发软件的功能、性能、数据和界面等要求。

需求开发的工作可以分成以下4个方面：

（1）问题识别：用于发现和描述需求，并预先估计以后系统可能达到的目标。

（2）分析与综合：对问题进行分析，然后在此基础上整合出解决方案。这个步骤经常是反复进行的，常用的方法有面向数据流的结构化分析方法，面向数据结构的Jackson方法，面向对象的分析方法，以及用于建立动态模型的状态迁移图和Petri网。

- Petri网是一种使用图形方式对系统进行需求规格说明的技术，用来定义多进程、多任务系统的数学模型，易于描述系统的并发、竞争、同步等特征，并可用于评价和改进系统。
- 状态迁移图是描述系统的状态如何响应外部的信号进行推移的一种图形表示。在状态迁移图中，用圆圈表示可得到的系统状态，用箭头表示从一种状态向另一种状态的迁移。
- 用时序图来对比在系统中处理事件的时序和相应的处理时间，采用扩充时序图可表示进程间的通信流，用于分析几个事件的交错现象。

（3）编制需求分析的文档：也就是对已经确定的需求进行文档化描述，该文档通常称为软件需求说明书（需求规格说明书）。

（4）需求分析与评审：它是需求分析工作的最后一步，主要是对功能的正确性、完整性和清晰性，以及其他需求给予评价。

需求开发必须遵循以下原则：

（1）必须能够表达和理解问题的信息域和功能域。

（2）必须表示软件的行为（作为外部事件的结果）。

（3）必须划分描述信息、功能和行为的模型，从而可以以层次的方式揭示细节。

（4）分析过程应该从要素信息移向细节实现。

（5）必须按自顶向下、逐层分解的方式对问题进行分解和不断细化。

（6）要给出系统的逻辑视图和物理视图。

## 需求的分类



- 功能需求：是指系统必须完成的那些事，即为了向它的用户提供有用的功能，产品必须执行的动作。
- 非功能需求：是指产品必须具备的性能或品质，例如，可靠性、容错性等。
- 设计约束：也称为限制条件、补充规约，通常是对解决方案的一些约束说明



----------------------



- 业务需求：是指反映组织机构或客户对系统、产品高层次的目标要求，通常问题定义本身就是业务需求。
- 用户需求：是指描述用户使用产品必须要完成什么任务、怎么完成的需求，通常是在问题定义的基础上进行用户访谈、调查，对用户使用的场景进行整理，然后建立的从用户角度的需求。
- 系统需求：是从系统的角度来说明软件的需求，它包括了用特性说明的功能需求，质量属性及其他非功能需求，还有设计约束。



----------------------------------



QFD需求分类：

- 基础需求
- 期望需求
- 兴奋需求



## 需求获取

- What：应该搜集什么信息。

  要获取的信息包括三大类：

  - 与问题域相关的信息（如业务资料、组织结构图、业务处理流程等）
  - 与要求解决的问题相关的信息
  - 用户对系统的特别期望与施加的任何约束信息。

- Where：从什么地方搜集这些信息。

  通常情况下，这些信息会藏于客户、原有系统、原有系统用户、新系统的潜在用户、原有产品、竞争对手的产品、领域专家、技术法规与标准里。

  在制定需求获取计划的时候，我们可以列出一个表格，第1列是我们想了解的信息，第2列是信息可能的来源，这样就能够建立起一一对应的关系，使得需求获取工作更加有的放矢，也更加高效

- How：用什么机制或者技术来搜集这些信息。

  需求捕获技术：

### 需求获取技术

#### 用户访谈

用户访谈是最基本的一种需求获取手段，其形式包括**结构化**和**非结构化**两种。

- 结构化是指事先准备好一系列问题，有针对地进行；
- 非结构化则是只列出一个粗略的想法，根据访谈的具体情况发挥。

最有效的访谈是结合这两种方法进行。

优点：

- 用户访谈具有良好的灵活性，用较宽广的应用范围，

缺点：

- 诸如客户经常较忙，难以安排到时间；

- 面谈时信息量大，记录较为困难
- 沟通需要很多技巧，同时需要分析人员有足够的领域知识；

- 在访谈时会遇到一些对于组织来说比较机密和敏感的话题。

解决方案：

- 需要分析人员拥有足够多的经验和较强的沟通能力。



#### 用户调查

即调查问卷，通过精心设计要问的问题，然后下发到相关的人员手里，让他们填写答案。

优点：

- 可以解决用户访谈中很多关键的人员时间有限，不容易安排过多的时间；而且客户面经常较广，不可能一一访谈的问题。

缺点：

- 缺乏灵活性
- 双方未见面，分析人员无法从他们的表情等其它动作来获取一些更隐性的信息
- 客户不认真对待从而使得反馈的信息不全面

解决方案：

- 通过联系客户领导使客户从上而下的下发任务进行问卷调查，解决不认真对待问题
- 综合两种方式，先设计问题，制作成为用户调查表，下发填写完后，进行仔细的分组、整理、分析，以获得基础信息，然后再针对这个结果进行小范围的用户访谈，作为补充



#### 现场观摩

对于许多较为复杂的流程和操作而言，是比较难以用言语表达清楚的，分析团队可以就一些较复杂、较难理解的流程、操作采用现场观摩的方法来获取需求。

走到客户的工作现场，一边观察，一边听客户的讲解，甚至可以安排人员跟随客户工作一小段时间。这样就可以使得分析人员更加直观地理解需求。



#### 阅读历史文档

对于一些数据流比较复杂的，工作表单较多的项目，有时是难以通过说，或者通过观察来了解需求细节的。可以借助于阅读历史文档的方法，对历史存在的一些文档进行研究，从中获得所需的信息。

缺点：

- 历史的文档可能与新系统的流程、数据有一些不吻合的地方，并且还可以承载一些原有系统的缺陷
- 历史的文档中记载的信息有可能涉及到客户的商业秘密

解决方案：

- 分析人员能够运用自己的聪明才智，将其与其它需求捕获技术结合对照，及时发现问题和避免问题。
- 加强保密工作和保密教育



#### 联合讨论会

JRP是一种相对来说成本较高的需求获取方法，但也是十分有效的一种。通过联合各个关键客户代表、分析人员、开发团队代表一起，通过有组织的会议来讨论需求。参与人数为6～18人，召开时间为1～5小时。

会议前：

- 做好准备，将与讨论主题相关的材料提前分发给所有将要参加会议的人

会议中：

- 让所有的与会者互相认识，以使交流在更加轻松的气氛下进行

- 针对所列举的问题进行逐项专题讨论

- 对原有系统、类似系统的不足进行开放性交流

- 上对新的解决方案进行一番设想

- 将这些想法、问题、不足记录下来，形成一个要点清单

- 将要点清单进行整理，明确优先级，并进行评审

  

JRP将会起到群策群力的效果，对于一些问题最有歧义的时候、对需求最不清晰的领域都是十分有用的一种技术。难点在于会议的组织和效率。



### 需求捕获的策略

在整个需求过程中，需求捕获、需求分析、需求定义、需求验证四个阶段不是瀑布式的发展，而且应该采用迭代式的演化过程。不可能一蹴而就的获取到所有需求后在进入下一阶段，而是应该在获取到一部分需求后，进入需求分析阶段进行分析，并针对分析中的问题在进行针对性的需求获取工作。



## 需求分析

- SA  结构化分析
- OOA  面向对象分析
- PDOA  面向问题领域分析

### SA

#### 业务流程分析

业务流程分析的目的是了解各个业务流程的过程：

（1）通过调查掌握基本情况。

（2）描述现有业务流程（绘制业务流程图）。

（3）确认现有业务流程。

（4）对业务流程进行分析。

（5）发现问题，提出解决方案。

（6）提出优化后的业务流程

#### 数据流图DFD

DFD是结构化分析中的重要方法和工具，是**表达系统内数据的流动并通过数据流描述系统功能**的一种方法。

**DFD从数据传递和加工的角度**，利用图形符号通过**逐层细分描述系统内各个部件的功能和数据在它们之间传递的情况**，来**说明系统所完成的功能**。

主要作用：

- DFD是理解和表达用户需求的工具，是系统分析的手段。由于DFD简明易懂，理解它不需要任何计算机专业知识，因此通过它同客户交流很方便。
- DFD概括地描述了系统的内部逻辑过程，是系统分析结果的表达工具，因而也是系统设计的重要参考资料，是系统设计的起点。 
- DFD作为一个存档的文字材料，是进一步修改和充实开发计划的依据。

DFD包含：

- **数据流**
- **加工**
- **数据存储**
- **外部实体**

画DFD的基本步骤，就是“自顶向下，逐层分解”，**DFD的原则**：

- **DFD中的所有图形符号只限于前述四种基本图形元素。**
- **顶层DFD必须包括前述四种基本元素，缺一不可。**
- **顶层DFD中的数据流必须封闭在外部实体之间。**
- **每个加工至少有一个输入数据流和一个输出数据流。**
- **在DFD中，需按层给加工框编号。编号表明了该加工处在哪一层，以及上下层的父图与子图的对应关系。**
- **规定任何一个数据流子图必须与它上一层的一个加工对应，两者的输入数据流和输出数据流必须一致。此即父图与子图的平衡。**
- **可以在DFD中加入物质流，帮助用户理解DFD。**
- **图上每个元素都必须有名字。**
- **DFD中不可夹带控制流。**



#### 数据字典

数据字典是关于数据的信息的集合，也就是对**DFD中包含的所有元素的定义的集合**。DFD和数据字典共同构成系统的逻辑模型。**数据字典+DFD共同构成了系统规格说明**。没有DFD，数据字典难以发挥作用；没有数据字典，DFD就不严格。

数据字典设计包含：

- 数据流设计
- 数据元素字典设计
- 数据处理字典设计
- 数据结构字典设计
- 数据存储设计

加工的描述方法：

- 结构化语言
- 判定树
- 判定表



#### 需求定义

需求定义的过程也就是形成需求规格说明书的过程，通常有两种需求定义的方法，分别是严格定义方法和原型方法。

- 严格定义（预先定义）

  是目前采用较多的一种需求定义方法。建立在以下假设上：

  - 所有需求都能够被预先定义。
  - 开发人员与用户之间能够准确而清晰地交流
  - 采用图形/文字可以充分体现最终系统

  缺陷：

  - 文档量大

  - 开发过程可见性差，来自用户的反馈太迟

    

  需求的严格定义的基本假设在许多情况下并不成立，传统的结构化方法面临着一些难以跨越的障碍。

- 原型法

  原型化的需求定义过程是一个开发人员与用户通力合作的反复过程。采用原型方法时需要注意的几个问题：

  - 并非所有的需求都能在系统开发前被准确地说明

  - 项目参加者之间通常都存在交流上的困难

  - 需要实际的、可供用户参与的系统模型

  - 有合适的系统开发环境

  - 反复是完全需要和值得提倡的

    

    

**需求一旦确定，就应遵从严格的方法**

- 严格定义需求的方法实际上抑制了用户在需求定义以后再改进的要求，这对提高最终系统的质量是有害的
- 原型方法的使用并不排除严格定义方法的运用，当通过原型并在演示中得到明确的需求定义后，应采用行之有效的结构化方法来完成最终系统的开发



#### 软件需求说明书 SRS

软件需求说明书（Software Requirements Specification，SRS）是需求开发阶段的成果，代表用户和开发人员对软件系统的共同理解，是软件项目后期开发和维护的基础。

SRS需要把用户对软件的功能需求和非功能需求进行详细记录和准确描述，它应该尽可能完整地描述系统预期的外部行为和用户可视化行为。不应该包括设计、构造、测试或工程管理的细节，也不应该包括对算法的详细过程描述。

可以使用以下3种方法编写SRS：

（1）用好的结构化和自然语言编写文本型文档。

（2）建立图形化模型，这些模型可以描述转换过程、系统状态和它们之间的变化、数据关系、逻辑流或对象类和它们的关系。

（3）编写形式化规格说明，这可以通过使用数学上精确的形式化逻辑语言来定义需求。





## 需求管理

需求管理通常包括**定义需求基线、处理需求变更及需求跟踪**等方面的工作。

需求跟踪的主要目的如下：

（1）审核。跟踪能力信息可以帮助审核确保所有需求被应用。

（2）在增加、删除、修改需求时可以确保不忽略每个受到影响的系统元素。

（3）使得维护时能正确、完整地实施变更，从而提高生产率。

（4）获得计划功能当前实现状态的记录。

（5）再工程。可以列出旧系统中将要替换的功能，记录它们在新系统的需求和软件组件中的位置。

（6）重新利用跟踪信息可以帮助开发人员在新系统中对相同的功能利用旧系统相关资源。

（7）可以减少由于关键成员离开项目带来的风险。

（8）可以在测试出错时指出最可能有问题的代码段。

需求跟踪需要建立与维护需求跟踪矩阵（即表格），当需求文档或后续工作成果发生变更时，要及时更新需求跟踪矩阵。



